op 200 yfx :
op 100 fx $

root
	// The program 

	// define a transition rule:
	// it searches for "write a" patterns (where a is an arbitrary expression)
	// 
	rule
		src:write
		write $a
		{ that.ReplaceWith($1); }
			{ that.ReplaceWith($1); }
				$a

	rule
		alma
		write lofusz

	alma

	// The result of the run:
	// lofusz